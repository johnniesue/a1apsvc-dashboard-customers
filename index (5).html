<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A-1 Plumbing Customer & Job Management</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîß</text></svg>">
</head>
<body>
    <header>
        <h1>üîß A-1 Plumbing Customer & Job Management</h1>
        <p>Professional Plumbing Services - Customer Intake & Job Tracking System</p>
    </header>
    
    <main>
        <section class="form-section">
            <h2>Customer & Job Information</h2>
            
            <form id="customerForm">
                <fieldset class="customer-info">
                    <legend>Customer Information</legend>
                    <div class="form-grid">
                        <input type="text" id="firstName" placeholder="First Name *" required />
                        <input type="text" id="lastName" placeholder="Last Name *" required />
                        <input type="text" id="company" placeholder="Company" />
                        <input type="email" id="email" placeholder="Email" />
                        <input type="tel" id="mobile" placeholder="Mobile Phone" />
                        <input type="tel" id="home" placeholder="Home Phone" />
                        <input type="tel" id="work" placeholder="Work Phone" />
                        <select id="customerType">
                            <option value="">Customer Type</option>
                            <option value="Residential">Residential</option>
                            <option value="Commercial">Commercial</option>
                            <option value="Emergency">Emergency</option>
                            <option value="Maintenance">Maintenance Contract</option>
                        </select>
                        <select id="leadSource">
                            <option value="">Lead Source</option>
                            <option value="Google">Google Search</option>
                            <option value="Referral">Referral</option>
                            <option value="Facebook">Facebook</option>
                            <option value="Yelp">Yelp</option>
                            <option value="Repeat Customer">Repeat Customer</option>
                            <option value="Yellow Pages">Yellow Pages</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="address-section">
                        <input type="text" id="address" placeholder="Service Address *" required />
                        <div id="addressStatus" class="address-status"></div>
                        <small>üí° Address will be verified automatically using Google Maps</small>
                    </div>
                </fieldset>
                
                <fieldset class="job-info">
                    <legend>Job Information</legend>
                    <div class="form-grid">
                        <select id="jobType">
                            <option value="">Job Type</option>
                            <option value="Drain Cleaning">Drain Cleaning</option>
                            <option value="Leak Repair">Leak Repair</option>
                            <option value="Water Heater">Water Heater Service</option>
                            <option value="Toilet Repair">Toilet Repair</option>
                            <option value="Faucet Repair">Faucet Repair</option>
                            <option value="Pipe Repair">Pipe Repair</option>
                            <option value="Emergency Service">Emergency Service</option>
                            <option value="Installation">New Installation</option>
                            <option value="Inspection">Inspection</option>
                            <option value="Maintenance">Maintenance</option>
                        </select>
                        
                        <select id="jobPriority">
                            <option value="">Priority Level</option>
                            <option value="Low">Low</option>
                            <option value="Normal">Normal</option>
                            <option value="High">High</option>
                            <option value="Emergency">Emergency</option>
                        </select>
                        
                        <select id="jobStatus">
                            <option value="">Job Status</option>
                            <option value="Quote Requested">Quote Requested</option>
                            <option value="Scheduled">Scheduled</option>
                            <option value="En Route">En Route</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Completed">Completed</option>
                            <option value="Cancelled">Cancelled</option>
                            <option value="Follow-up Required">Follow-up Required</option>
                        </select>
                        
                        <select id="assignedTech">
                            <option value="">Assign Technician</option>
                            <option value="Mike Johnson">Mike Johnson</option>
                            <option value="Steve Rodriguez">Steve Rodriguez</option>
                            <option value="Tom Wilson">Tom Wilson</option>
                            <option value="Dave Miller">Dave Miller</option>
                            <option value="Chris Brown">Chris Brown</option>
                        </select>
                        
                        <input type="datetime-local" id="scheduledDate" />
                        <label for="scheduledDate" class="field-label">Scheduled Date & Time</label>
                        
                        <select id="estimatedDuration">
                            <option value="">Estimated Duration</option>
                            <option value="30 minutes">30 minutes</option>
                            <option value="1 hour">1 hour</option>
                            <option value="1.5 hours">1.5 hours</option>
                            <option value="2 hours">2 hours</option>
                            <option value="3 hours">3 hours</option>
                            <option value="4+ hours">4+ hours</option>
                            <option value="Full day">Full day</option>
                        </select>
                    </div>
                </fieldset>
                
                <fieldset class="notes-section">
                    <legend>Additional Information</legend>
                    <textarea id="notes" placeholder="Job notes, special instructions, customer requests, etc." rows="4"></textarea>
                </fieldset>
                
                <div class="form-actions">
                    <button type="submit" id="submitBtn" class="primary-btn">üíæ Save Customer & Job</button>
                    <button type="button" id="cancelEdit" class="secondary-btn" style="display: none;">‚ùå Cancel Edit</button>
                </div>
            </form>
            
            <div id="responseMessage" class="response-message"></div>
        </section>
        
        <!-- Quick Actions for Mobile Techs -->
        <section class="quick-actions mobile-section">
            <h3>üì± Quick Actions for Techs</h3>
            <div class="quick-buttons">
                <button id="quickEnRoute" class="quick-btn en-route">üöó I'm En Route</button>
                <button id="quickInProgress" class="quick-btn in-progress">üîß Job Started</button>
                <button id="quickCompleted" class="quick-btn completed">‚úÖ Job Complete</button>
            </div>
            <div id="quickUpdateStatus" class="quick-status"></div>
        </section>
        
        <section class="table-section">
            <h2>üìã Customer & Job Records</h2>
            <div class="table-container">
                <table id="customerTable">
                    <thead>
                        <tr>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th>Company</th>
                            <th>Address</th>
                            <th>Mobile</th>
                            <th>Email</th>
                            <th>Job Type</th>
                            <th>Priority</th>
                            <th>Status</th>
                            <th>Assigned Tech</th>
                            <th>Scheduled</th>
                            <th>Duration</th>
                            <th>Notes</th>
                            <th>Created</th>
                            <th>Edit</th>
                            <th>Delete</th>
                            <th>Quick Status</th>
                            <th>Map</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Customer/Job data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>
        
        <section class="map-section">
            <h2>üó∫Ô∏è Service Area Map</h2>
            <div id="map"></div>
            <p class="map-help">
                üí° <strong>Tips:</strong> 
                ‚Ä¢ Addresses are automatically verified when you enter them<br>
                ‚Ä¢ Click the üìç Map button next to any job to see its location<br>
                ‚Ä¢ Click anywhere on the map to get an address for that location
            </p>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2024 A-1 Affordable Plumbing Services - Professional Customer & Job Management System</p>
    </footer>
    
    <!-- Firebase SDK v9 (Compat version) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-compat-firestore.js"></script>
    
    <!-- Google Maps API with working key -->
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBu-916DdpKAjTmJNIgngS6HL_kDIKU0aU&callback=initMap&libraries=places&v=weekly">
    </script>
    
    <!-- Enhanced Customer & Job Management Script -->
    <script src="script.js"></script>
</body>
</html>

